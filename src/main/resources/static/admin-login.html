<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>Nova Bank | Admin Login</title>
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
    <style>
        :root {
            --bg-primary: linear-gradient(135deg, #0f0c29, #302b63, #24243e);
            --bg-card: rgba(255, 255, 255, 0.05);
            --border-color: rgba(255, 255, 255, 0.1);
            --text-main: #ffffff;
            --text-sec: rgba(255, 255, 255, 0.7);
            --accent-grad: linear-gradient(135deg, #0ea5e9 0%, #2563eb 100%);
            --input-bg: rgba(0, 0, 0, 0.2);
            --logo-color: #ffffff;
        }

        body.light-mode {
            --bg-primary: linear-gradient(135deg, #f0f4ff, #e0f2fe, #e0e7ff);
            --bg-card: rgba(255, 255, 255, 0.65);
            --border-color: rgba(255, 255, 255, 0.6);
            --text-main: #0f172a;
            --text-sec: #64748b;
            --input-bg: rgba(255, 255, 255, 0.9);
            --logo-color: #0f172a;
        }

        * { margin:0; padding:0; box-sizing:border-box; font-family:'Segoe UI', sans-serif; transition: 0.3s; }
        body { background: var(--bg-primary); height: 100vh; display: flex; align-items: center; justify-content: center; overflow: hidden; }

        body::before { content:''; position:absolute; width:400px; height:400px; background:radial-gradient(#0ea5e955, transparent 70%); top:-100px; left:-100px; border-radius:50%; animation: float 8s infinite alternate; }
        @keyframes float { to { transform: translate(40px, 40px); } }

        .card {
            background: var(--bg-card); backdrop-filter: blur(20px); border: 1px solid var(--border-color);
            padding: 40px; border-radius: 24px; width: 400px; text-align: center; box-shadow: 0 8px 32px rgba(0,0,0,0.3);
        }

        /* --- BIG LOGO UPDATE --- */
        .icon-box {
            font-size: 40px;
            margin-bottom: 10px;
            background: var(--accent-grad);
            background-clip: text;
            -webkit-background-clip: text;
            -webkit-text-fill-color: transparent;
            filter: drop-shadow(0 0 10px rgba(14, 165, 233, 0.5));
        }
        h2 {
            color: var(--logo-color);
            margin-bottom: 30px;
            font-weight: 800;
            font-size: 28px;
            letter-spacing: -0.5px;
        }

        input {
            width: 100%; padding: 14px; margin-bottom: 15px; border-radius: 12px; border: 1px solid var(--border-color);
            background: var(--input-bg); color: var(--text-main); outline: none;
        }
        input:focus { border-color: #0ea5e9; box-shadow: 0 0 0 3px rgba(14, 165, 233, 0.2); }

        .btn {
            width: 100%; padding: 14px; background: var(--accent-grad); color: white; border: none;
            border-radius: 12px; font-weight: 600; cursor: pointer; margin-top: 10px;
        }
        .btn:hover { transform: translateY(-2px); box-shadow: 0 5px 15px rgba(14, 165, 233, 0.4); }

        .message { padding: 10px; border-radius: 8px; margin-bottom: 15px; display: none; font-size: 14px; }
        .message.error { background: rgba(239,68,68,0.2); color: #ef4444; border: 1px solid rgba(239,68,68,0.3); }
        .message.success { background: rgba(16,185,129,0.2); color: #10b981; border: 1px solid rgba(16,185,129,0.3); }
        .message.show { display: block; }

        .theme-btn { position: absolute; top: 20px; right: 20px; background: none; border: none; font-size: 20px; cursor: pointer; color: var(--text-main); }
    </style>
</head>
<body>
<button class="theme-btn" onclick="toggleTheme()">üåô</button>

<div class="card">
    <div class="icon-box"><i class="fas fa-shield-alt"></i></div>
    <h2>Admin Access</h2>
    <div id="loginMessage" class="message"></div>
    <form id="loginForm">
        <input type="text" id="username" placeholder="Admin Username" required>
        <input type="password" id="password" placeholder="Secure Key" required>
        <button type="submit" class="btn" id="loginBtn">Login</button>
    </form>
    <div style="margin-top: 20px; font-size: 14px;">
        <a href="home.html" style="color: var(--text-sec); text-decoration: none;">‚Üê Return Home</a>
    </div>
</div>

<script>
    function toggleTheme() {
        document.body.classList.toggle('light-mode');
        const btn = document.querySelector('.theme-btn');
        btn.textContent = document.body.classList.contains('light-mode') ? '‚òÄÔ∏è' : 'üåô';
        localStorage.setItem('theme', document.body.classList.contains('light-mode') ? 'light' : 'dark');
    }
    window.addEventListener('DOMContentLoaded', () => {
        if (localStorage.getItem('theme') === 'light') {
            document.body.classList.add('light-mode');
            document.querySelector('.theme-btn').textContent = '‚òÄÔ∏è';
        }
    });

    const API_URL = "http://localhost:8081";

    function showMessage(msg, type) {
        const el = document.getElementById("loginMessage");
        el.innerText = msg;
        el.className = "message " + type + " show";
    }

    document.getElementById("loginForm").addEventListener("submit", async (e) => {
        e.preventDefault();
        const data = {
            username: document.getElementById("username").value,
            password: document.getElementById("password").value
        };

        try {
            const btn = document.getElementById("loginBtn");
            btn.disabled = true;
            btn.style.opacity = "0.7";
            btn.style.cursor = "not-allowed";

            const res = await fetch(`${API_URL}/auth/admin/login`, {
                method: "POST", headers: { "Content-Type": "application/json" }, body: JSON.stringify(data)
            });

        const text = await res.text();
        if (
            text === "Admin Not Found" ||
            text === "Password Incorrect" ||
            text === "Unauthorized Access"
        ) {
            showMessage(text, "error");
            btn.disabled = false;
            btn.style.opacity = "1";
            btn.style.cursor = "pointer";
            return;
        }

            localStorage.setItem("isLoggedIn", "true");
            localStorage.setItem("role", "ADMIN");
            localStorage.setItem("adminId", text);

            showMessage("Admin login successful", "success");
            setTimeout(() => { window.location.href = "admin-dashboard.html"; }, 800);

        } catch {
            showMessage("Server error", "error");
            btn.disabled = false;
            btn.style.opacity = "1";
            btn.style.cursor = "pointer";
        }
    });
</script>
</body>
</html>